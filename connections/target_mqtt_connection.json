{   
    "name": "Target Connection",
    "connectionType": "mqtt",
    "connectionStatus": "open",
    "failoverEnabled" : true,
    "uri": "tcp://test.mosquitto.org:1883",
    "sources": [],
    "targets": [{
        "address": "subsystems/downlink/{{ thing:id }}",
        "topics" : [
            "_/_/things/twin/events?filter=like(thingId,'org.eclipse.ditto:water-level-subsystem')",
            "_/_/things/live/messages"
        ],
        "authorizationContext": ["connection:mqtt"],
        "qos": 0
    }],
    "mappingContext": {
        "mappingEngine": "JavaScript",
        "options": {
            "outgoingScript": "function mapFromDittoProtocolMsg(namespace,name,group,channel,criterion,action,path,dittoHeaders,value,status,extra) {let contentType = 'application/json';let bytePayload = null;let textPayload = '{\"test\": ' + value + '\"}';if((name === 'water-level-subsystem' || name === 'smart-light-subsystem') && namespace === 'org.eclipse.ditto'){return Ditto.buildExternalMsg(dittoHeaders,textPayload, bytePayload, contentType );} return null;}"
        }
    }
}
